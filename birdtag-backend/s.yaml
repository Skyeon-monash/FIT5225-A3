# s.yaml (最终版 - 已修正层级结构以匹配 fc3 schema)
edition: 3.0.0
name: birdtag-app
access: "default"

resources:
  birdtag-api:
    component: fc3
    props:
      # 地域配置
      region: "cn-beijing"

      # 1. 服务配置块 (Service Configuration Block)
      #    这个块是 fc3 组件用来配置函数所属的服务。
      service:
        name: "birdtag-service"
        description: "BirdTag 项目后端服务"
        role: "acs:ram::1464807137565297:role/fit5225-role"
        internetAccess: true

      # 2. 函数自身属性 (Function's Own Properties)
      #    这些属性直接放在 props 下，不再有 'function:' 的包裹层。
      functionName: "get-presigned-url"
      description: "获取 OSS 预签名上传 URL"
      runtime: python3.9
      handler: index.handler
      memorySize: 128
      timeout: 30
      code: ./src
      environmentVariables:
        BUCKET_NAME: "fi5225"

      # 3. 触发器配置 (Triggers Configuration)
      #    这个块也直接放在 props 下。
      triggers:
      - triggerName: http-trigger
        triggerType: http
        triggerConfig:
          authType: anonymous
          methods:
          - POST
          - OPTIONS
